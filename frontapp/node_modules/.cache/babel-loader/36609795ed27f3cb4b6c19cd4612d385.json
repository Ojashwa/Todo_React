{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _objectSpread from\"E:/todo_drf/todo/frontapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"E:/todo_drf/todo/frontapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"E:/todo_drf/todo/frontapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"E:/todo_drf/todo/frontapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"E:/todo_drf/todo/frontapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"E:/todo_drf/todo/frontapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import logo from\"./logo.svg\";import React from\"react\";import\"./App.css\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.state={todoList:[],activeItem:{id:null,title:\"\",completed:false},editing:false};_this.fetchTask=_this.fetchTask.bind(_assertThisInitialized(_this));_this.handelChange=_this.handelChange.bind(_assertThisInitialized(_this));_this.addTask=_this.addTask.bind(_assertThisInitialized(_this));_this.getCsrf=_this.getCsrf.bind(_assertThisInitialized(_this));_this.infoIcon=_this.infoIcon.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchTask();// document.getElementById('t-info').addEventListener('mouseover',this.infoIcon,false);\n}},{key:\"fetchTask\",value:function fetchTask(e){var _this2=this;// console.log(\"featching.....\");\nfetch(\"http://127.0.0.1:8000/api/task-list/\").then(function(response){return response.json();}).then(function(data){return _this2.setState({todoList:data});});// if(this.state.todoList){\n//   this.addTask(e);\n// }\n}//get csrf token\n},{key:\"getCsrf\",value:function getCsrf(name){var cookieValue=null;if(document.cookie&&document.cookie!==\"\"){var cookies=document.cookie.split(\";\");for(var i=0;i<cookies.length;i++){var cookie=cookies[i].trim();if(cookie.substring(0,name.length+1)===name+\"=\"){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}// this method create a new task\n},{key:\"addTask\",value:function addTask(e){e.preventDefault();var getDiv=document.getElementById(\"list-wrapper\");var setDiv=document.createElement(\"div\");setDiv.setAttribute('class','row');setDiv.setAttribute('id','new-task');setDiv.insertAdjacentHTML(\"afterbegin\",\"<div class='col-sm-1'><i class='far fa-circle'></i>&nbsp;</div><div class='col-sm-11 task-wrapper flex-wrapper' id='new-inp'></div>\");console.log(setDiv.childNodes[1]);// setDiv.setAttribute(\"class\", \"task-wrapper flex-wrapper\");\nvar inputBox=document.createElement(\"input\");inputBox.setAttribute(\"type\",\"text\");inputBox.setAttribute(\"class\",\"task-input flex-wrapper\");// setDiv.appendChild(inputBox);\nsetDiv.childNodes[1].appendChild(inputBox);getDiv.appendChild(setDiv);inputBox.focus();inputBox.addEventListener(\"keyup\",this.handelChange,false);}//info on mouse over\n},{key:\"infoIcon\",value:function infoIcon(e){document.getElementById('info').insertAdjacentElement('afterbegin','<i class=\"fas fa-info-circle\"></i>');}},{key:\"handelChange\",value:function handelChange(e){var _this3=this;this.setState({activeItem:_objectSpread(_objectSpread({},this.state.activeItem),{},{title:e.target.value})});// console.log(\"TITLE\",this.state.activeItem);\nif(e.keyCode===13){var csrf=this.getCsrf(\"csrftoken\");fetch(\"http://127.0.0.1:8000/api/task-create/\",{method:\"POST\",headers:{'Content-type':'application/json',\"X-CSRFToken\":csrf},body:JSON.stringify(this.state.activeItem)}).then(function(response){// console.log(response);\n// this.fetchTask();\n_this3.setState({activeItem:{id:null,title:\"\",completed:false}});// document.getElementById('new-task').remove();\ndocument.getElementById('submit').click();}).catch(function(error){console.log(\"ERROR\",error);// shows the if any error occur in response\n});}else{console.log(e.target.value);// console.log(e);\n}}},{key:\"render\",value:function render(){var tasks=this.state.todoList;return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{id:\"task-container\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"form-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row head\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Todo\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",id:\"submit\",onClick:this.addTask,className:\"btn btn-secondary\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus-square\"})})})]}),/*#__PURE__*/_jsx(\"div\",{id:\"list-wrapper\",children:tasks.map(function(task,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-sm-1\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"far fa-circle\"}),\"\\xA0\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-10 task-wrapper flex-wrapper\",id:\"t-info\",children:/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"20px\"},children:task.title})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-1\"})]},index);})})]})})});}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["E:/todo_drf/todo/frontapp/src/App.js"],"names":["React","App","props","state","todoList","activeItem","id","title","completed","editing","fetchTask","bind","handelChange","addTask","getCsrf","infoIcon","e","fetch","then","response","json","data","setState","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","preventDefault","getDiv","getElementById","setDiv","createElement","setAttribute","insertAdjacentHTML","console","log","childNodes","inputBox","appendChild","focus","addEventListener","insertAdjacentElement","target","value","keyCode","csrf","method","headers","body","JSON","stringify","click","catch","error","tasks","map","task","index","fontSize","Component"],"mappings":"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","sourcesContent":["import logo from \"./logo.svg\";\nimport React from \"react\";\nimport \"./App.css\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      todoList: [],\n      activeItem: {\n        id: null,\n        title: \"\",\n        completed: false,\n      },\n      editing: false,\n    };\n    this.fetchTask = this.fetchTask.bind(this);\n    this.handelChange = this.handelChange.bind(this);\n    this.addTask = this.addTask.bind(this);\n    this.getCsrf = this.getCsrf.bind(this);\n    this.infoIcon = this.infoIcon.bind(this);\n  }\n  componentDidMount() {\n    this.fetchTask();\n    // document.getElementById('t-info').addEventListener('mouseover',this.infoIcon,false);\n  }\n  fetchTask(e) {\n    // console.log(\"featching.....\");\n    fetch(\"http://127.0.0.1:8000/api/task-list/\")\n      .then((response) => response.json())\n      .then((data) =>\n        this.setState({\n          todoList: data,\n        })\n      );\n    // if(this.state.todoList){\n    //   this.addTask(e);\n    // }\n  }\n\n  //get csrf token\n  getCsrf(name) {\n    let cookieValue = null;\n    if (document.cookie && document.cookie !== \"\") {\n      const cookies = document.cookie.split(\";\");\n      for (let i = 0; i < cookies.length; i++) {\n        const cookie = cookies[i].trim();\n        if (cookie.substring(0, name.length + 1) === name + \"=\") {\n          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n          break;\n        }\n      }\n    }\n    return cookieValue;\n  }\n\n  // this method create a new task\n  addTask(e) {\n    e.preventDefault();\n    let getDiv = document.getElementById(\"list-wrapper\");\n    let setDiv = document.createElement(\"div\");\n    setDiv.setAttribute('class','row');\n    setDiv.setAttribute('id','new-task');\n    setDiv.insertAdjacentHTML(\n      \"afterbegin\",\n      \"<div class='col-sm-1'><i class='far fa-circle'></i>&nbsp;</div><div class='col-sm-11 task-wrapper flex-wrapper' id='new-inp'></div>\"\n    );\n    console.log(setDiv.childNodes[1]);\n    // setDiv.setAttribute(\"class\", \"task-wrapper flex-wrapper\");\n    let inputBox = document.createElement(\"input\");\n    inputBox.setAttribute(\"type\", \"text\");\n    inputBox.setAttribute(\"class\", \"task-input flex-wrapper\");\n    // setDiv.appendChild(inputBox);\n    setDiv.childNodes[1].appendChild(inputBox);\n    getDiv.appendChild(setDiv);\n    inputBox.focus();\n    inputBox.addEventListener(\"keyup\", this.handelChange, false);\n  }\n  \n  //info on mouse over\n  infoIcon(e){\n    document.getElementById('info').insertAdjacentElement('afterbegin','<i class=\"fas fa-info-circle\"></i>');\n  }\n  handelChange(e) {\n    this.setState({\n      activeItem:{\n        ...this.state.activeItem,\n        title:e.target.value\n      }\n    });\n    // console.log(\"TITLE\",this.state.activeItem);\n    if (e.keyCode === 13) {\n     \n      let csrf = this.getCsrf(\"csrftoken\");\n      fetch(\"http://127.0.0.1:8000/api/task-create/\", {\n        method: \"POST\",\n        headers: {\n          'Content-type': 'application/json',\n          \"X-CSRFToken\": csrf,\n        },\n        body: JSON.stringify(this.state.activeItem),\n      }).then(\n        ((response) => {\n          // console.log(response);\n          // this.fetchTask();\n          this.setState({\n            activeItem: {\n              id: null,\n              title: \"\",\n              completed: false,\n            },\n          });\n          // document.getElementById('new-task').remove();\n          document.getElementById('submit').click();\n        })\n      ).catch(function (error){\n        console.log(\"ERROR\",error);// shows the if any error occur in response\n      })\n    } else {\n      console.log(e.target.value);\n      // console.log(e);\n    }\n  }\n \n  render() {\n    let tasks = this.state.todoList;\n    return (\n      <div className=\"container\">\n        <div id=\"task-container\">\n          <div id=\"form-wrapper\">\n            <div className=\"row head\">\n              <div className=\"col-sm-6\">\n                <h2>Todo</h2>\n              </div>\n              <div className=\"col-sm-6\">\n                <button\n                  type=\"button\"\n                  id=\"submit\"\n                  onClick={this.addTask}\n                  className=\"btn btn-secondary\"\n                >\n                  <i className=\"fas fa-plus-square\"></i>\n                </button>\n              </div>\n            </div>\n            <div id=\"list-wrapper\">\n              {tasks.map(function (task, index) {\n                return (\n                  <div key={index} className=\"row\">\n                    <div className=\"col-sm-1\">\n                      <i className=\"far fa-circle\"></i>&nbsp;\n                    </div>\n                    <div className=\"col-sm-10 task-wrapper flex-wrapper\" id=\"t-info\">\n                      <p style={{ fontSize: \"20px\" }}>{task.title}</p>\n                    </div>\n                    <div className=\"col-sm-1\" ></div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}